<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Blast Off!</title>
    <link rel="stylesheet" 
	href="../styles/style.css">
	<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
	<script>
	// Initialize Firebase
	var config = {
    apiKey: "AIzaSyCHAGlFcD8WzHbEDeTmb6BOZ7XHGAEZB2E",
    authDomain: "grad-party-rsvp.firebaseapp.com",
    databaseURL: "https://grad-party-rsvp.firebaseio.com",
    projectId: "grad-party-rsvp",
    storageBucket: "",
    messagingSenderId: "1029606656078"
	};
	firebase.initializeApp(config);
	</script>
	
	<script>
	var Ref = firebase.database().ref();
	var rsvpRef = firebase.database().ref().child("Responses");
	rsvpRef.on("value",function(snapshot) {
		var headcount = 0;
		snapshot.forEach(function(childSnapshot) {
			var obj = childSnapshot.val();
			if(obj == "YES")
			{
				headcount++;
			}
		});
		Ref.child("Headcount").set(headcount);
	});
	
	function rsvpSubmit() {
		var name = document.getElementById("name").value;
		var form_elements = document.getElementById("rsvpForm").elements;
		var rsvpAnswer = form_elements['rsvp'].value;
		
		if (name == "" || rsvpAnswer == "")
		{
			window.alert("Not a valid response!");
		}
		else if (rsvpAnswer == "YES")
		{
			rsvpRef.child(name).set(rsvpAnswer);
			window.alert("Thank you "+name+", I can't wait to see you!");
		}
		
		else if (rsvpAnswer == "NO")
		{
			rsvpRef.child(name).set(rsvpAnswer);
			window.alert("I'm sorry you can't make it, "+name+"!");
		}
		rsvpForm.reset();	
	}
	
	function openWinHome() {
	   window.location.href = "../";
	}
	</script>
  </head>
  <body>
	<audio controls autoplay>
		<source src="../audio/mars.mp3" type="audio/mpeg">
	</audio>
	<div class="header">
		<ul>
			<li><input class= "buttonblast" target="home" type="button" value="Check out my personal webpage!" onclick="openWinHome()"></li>
		</ul>
	</div>
   <center>
   <div class="homespacer">
   </div>
   <h2>Blast off into Noah's future!</h2>
   <p>We hope you can join us as Noah graduates to the next phase of the mission<br/>and ventures into the deep, dark unknown of college.</p>
   <br/>
   <div class="image">
      <img src="../images/starman.jpg" alt="starman" />
	  <div class="shadowblast">
	  </div>
	</div>
	<br/>
	<div class = "row">
		<div class="columnL">
			<p><b>When?</b></p>
			<p>July 8th, 2018 @ 11am</p>
			<br/>
			<div class="googleCalendar" align="center">
				<p class = "googleCalendar"><b>Add the event to your...</b></p>
				<a class = "googleCalendar" target="_blank" href="https://calendar.google.com/event?action=TEMPLATE&amp;tmeid=MXJrZ2ljdWU4aWhoM2k0bWY2b2twOGhxdDQgOHZkdDd1cTA1cjM4OGE4amw5dDZvZ2ZxbWNAZw&amp;tmsrc=8vdt7uq05r388a8jl9t6ogfqmc%40group.calendar.google.com"><img border="0" src="https://www.google.com/calendar/images/ext/gc_button1_en.gif"></a>
			</div>
		</div>
		<div class="columnR">
			<p><b>Where?</b></p>
			<p>The Telford Inn</p>
			<p>145 Bridgeton Pike</p>
			<p>Mantua Township, NJ, 08051</p>
			<p>USA, Earth</p>
		</div>
	</div>
	<br/>
	<form id="rsvpForm">
		<label class="rsvpLabel"><b>Will you be in attendance?</b><br/>(submit once for each member of your party)</label>
		<br/>
		<input id="name" class="nameText" type="text" placeholder="Enter your name..."></input>
		<br/>
		<br/>
		<input id="radioY" class="rsvpRadio" type="radio" name="rsvp" value="YES"> 
		<label class="rsvpLabel">YES</label>
		<input id="radioN" class="rsvpRadio" type="radio" name="rsvp" value="NO">
		<label class="rsvpLabel">NO</label>
		<br/>
		<br/>
		<input class= "buttonblast" target="submit" type="button" value="Submit" onclick="rsvpSubmit()">
	</form>
	<br/>
   </center>
   </body>
</html>